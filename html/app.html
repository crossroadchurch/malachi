<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Malachi App</title>
  <link rel="stylesheet" href="/html/app.css" />
  <link rel="stylesheet" href="/html/jquery-ui.min.css" />
  <link rel="stylesheet" href="/html/jquery.mobile-1.4.5.min.css" />
  <link rel="stylesheet" href="/html/toastr.min.css" />
  <link rel="icon" href="/html/favicon.png" type="image/png" />
  <script type="text/javascript" src="/html/jquery-1.12.4.min.js"></script>
  <script type="text/javascript" src="/html/jquery-ui.min.js"></script>
  <script type="text/javascript" src="/html/jquery.mobile-1.4.5.min.js"></script>
  <script type="text/javascript" src="/html/toastr.min.js"></script>
  <script type="text/javascript" src="/html/app.js"></script>
</head>
<body>
  <div id="main_area">
    <div id="item_area">
      <div id="screen_view">
        <iframe id="screen_iframe" src="./screen?muted=true"></iframe>
      </div>
      <div id="item_header" style="padding-left:1em; padding-right:1em;">
        <input type="checkbox" id="screen_switch" data-role="flipswitch" data-on-text="Screen ON" data-off-text="Screen OFF" data-wrapper-class="custom-size-flipswitch" name="flip_screen_state" id="flip_screen_state">
        <img id="current_item_icon" src="/html/icons/icons8-musical-notes-48.png" /><span id="current_item_name">Item title</span>
      </div>
      <div id="current_item">
        <div id="video_controls" style="padding-left:1em; padding-right:1em;">
          <button id="play_btn" onclick="play_video();" class="ui-btn ui-corner-all ui-btn-inline ui-btn-icon-left ui-icon-play video-ctrl-btn">&nbsp;</button>
          <button id="pause_btn" onclick="pause_video();" class="ui-btn ui-corner-all ui-btn-inline ui-btn-icon-left ui-icon-pause video-ctrl-btn">&nbsp;</button>
          <button id="stop_btn" onclick="stop_video();" class="ui-btn ui-corner-all ui-btn-inline ui-btn-icon-left ui-icon-stop video-ctrl-btn">&nbsp;</button>
          <div id="time_seek_area">
            <label for="time_seek" class="ui-hidden-accessible">Time:</label>
            <input type="range" data-highlight="true" name="time_seek" id="time_seek" min="0" max="100">
          </div>
        </div>
        <div style="padding: 0px 10px 10px 10px">
          <ul id="current_item_list" data-role="listview" data-inset="true"></ul>
        </div>
      </div>
    </div>
    <div id="elements_area" class="ui-content">
      <ul>
        <li><a href="#service_element"><img class="element_icon" src="/html/icons/icons8-numbered-list-48.png" alt="Service" /></a></li>
        <li><a href="#song_element"><img class="element_icon" src="/html/icons/icons8-musical-notes-48.png" alt="Songs" /></a></li>
        <li><a href="#bible_element"><img class="element_icon" src="/html/icons/icons8-literature-48.png" alt="Bibles" /></a></li>
        <li><a href="#presentation_element"><img class="element_icon" src="/html/icons/icons8-presentation-48.png" alt="Presentations" /></a></li>
        <li><a href="#video_element"><img class="element_icon" src="/html/icons/icons8-tv-show-48.png" alt="Videos" /></a></li>
        <li><a href="#lights_element"><img class="element_icon" src="/html/icons/icons8-illumination-48.png" alt="Lights" /></a></li>
        <li><a href="#styles_element"><img class="element_icon" src="/html/icons/icons8-services-48.png" alt="Styles" /></a></li>
      </ul>

      <div id="service_element">
        <div id="service_menu">
          <button id="new_service_btn" class="ui-btn ui-corner-all ui-btn-inline" onclick="javascript:new_service(false);">New</button>
          <button id="load_service_btn" class="ui-btn ui-corner-all ui-btn-inline" onclick="load_service_preload();">Load</button>
          <button id="save_service_btn" class="ui-btn ui-corner-all ui-btn-inline" onclick="save_service('none');">Save</button>
          <button id="save_service_as_btn" class="ui-btn ui-corner-all ui-btn-inline" onclick="$('#popup_save_service_as').popup('open');">Save as</button>
        </div>
        <h3>Service plan</h3>
        <ul id="service_list" data-role="listview" data-inset="true"></ul>
      </div>

      <div id="song_element" class="ui-content">
        <div>
          <div id="song_search_div">
            <input type="search" id="song_search" value="" placeholder="Lyric or title search" oninput="song_search()">
          </div>
          <div id="new_song_btn_div">
            <button id="new_song_btn" class="ui-btn ui-corner-all ui-btn-inline" onclick="create_song()">Create song</button>
          </div>
        </div>
        <ul id="song_list" data-role="listview" data-inset="true"></ul>
      </div>

      <div id="bible_element" class="ui-content">
        <input type="search" id="bible_search" value="" placeholder="">
        <div class="ui-grid-b">
          <div class="ui-block-a">
            <select name="select_b_version" id="select_b_version" data-mini="true">
            </select>
          </div>
          <div class="ui-block-b">
            <div data-role="controlgroup" data-mini="true" data-type="horizontal">
              <input type="radio" name="b_search_type" id="b_search_type_ref" value="on" checked="checked"></input>
              <label for="b_search_type_ref">Ref</label>
              <input type="radio" name="b_search_type" id="b_search_type_text" value="off"></input>
              <label for="b_search_type_text">Text</label>
            </div>
          </div>
          <div class="ui-block-c">
            <div data-role="controlgroup" data-mini="true">
              <button id="bible_search_btn" class="ui-btn ui-corner-all" onclick="bible_search()">Search</button>
            </div>
          </div>
        </div>
        <div class="ui-grid-a">
          <div class="ui-block-a">
            <div data-role="controlgroup" data-type="horizontal" data-mini="true">
              <button id="select_all_btn" class="ui-btn ui-corner-all ui-btn-inline" onclick="select_all_verses()">Select all</button>
              <button id="select_none_btn" class="ui-btn ui-corner-all ui-btn-inline" onclick="select_none_verses()">Select none</button>
            </div>
          </div>
          <div class="ui-block-b">
            <div data-role="controlgroup" data-mini="true">
              <button id="add_passage_btn" class="ui-btn ui-corner-all" onclick="add_verses()">Add selected to service</button>
            </div>
          </div>
        </div>
        <fieldset id="passage_list" data-role="controlgroup">
        </fieldset>
      </div>
      
      <div id="presentation_element" class="ui-content">
        <h3>Available presentations</h3>
        <ul id="presentation_list" data-role="listview" data-inset="true"></ul>
      </div>

      <div id="video_element" class="ui-content">
        <h3>Available videos</h3>
        <ul id="video_list" data-role="listview" data-inset="true"></ul>
      </div>

      <div id="lights_element" class="ui-content">
        <h3>Lights control - coming soon!</h3>
      </div>

      <div id="styles_element" class="ui-content">
        <h3>Loops</h3>
        <ul id="loop_list" data-role="listview" data-inset="true"></ul>
        <button id="cancel_loop_btn" class="ui-btn ui-corner-all" onclick="clear_loop()">Clear loop</button>
        <h3>Styling</h3>
        <div>
          <div class="inputless-slider">
            <label for="s_width">Song area width (% of screen):</label>
            <input type="range" name="s_width" id="s_width" min="50" max="100" data-highlight="true" data-show-value="true">
          </div>
          <div class="inputless-slider">
            <label for="s_font_size">Font size (% of screen height):</label>
            <input type="range" name="s_font_size" id="s_font_size" min="5" max="20" data-highlight="true" data-show-value="true">
          </div>
          <div class="inputless-slider">
            <label for="s_lines">Max lines per slide:</label>
            <input type="range" name="s_lines" id="s_lines" min="1" max="10" data-highlight="true" data-show-value="true">
          </div>
          <div class="inputless-slider">
              <label for="s_margin">Top margin (% of screen height):</label>
              <input type="range" name="s_margin" id="s_margin" min="0" max="25" data-highlight="true" data-show-value="true">
            </div>
        </div>
      </div>
    </div>
  </div>

  <!-- POPUP: Prompt to save before stating new service -->
  <div data-role="popup" data-dismissible="false" data-overlay-theme="b" id="popup_new_service">
    <div data-role="header">
      <h1>Save service?</h1>
    </div>
    <div role="main" class="ui-content">
      <p>The current service has been modified.<br />Save these changes before starting a new service?</p>
      <a onclick= "javascript:save_service('new');" href="#" class="ui-btn ui-corner-all ui-shadow ui-btn-inline" data-rel="back">Save</a>
      <a onclick="javascript:new_service(true);" class="ui-btn ui-corner-all ui-shadow ui-btn-inline" data-rel="back">Discard</a>
      <a href="#" class="ui-btn ui-corner-all ui-shadow ui-btn-inline" data-rel="back">Cancel</a>
    </div>
  </div>

  <!-- POPUP: Prompt to save before loading service -->
  <div data-role="popup" data-dismissible="false" data-overlay-theme="b" id="popup_save_before_load_service">
    <div data-role="header">
      <h1>Save service?</h1>
    </div>
    <div role="main" class="ui-content">
      <p>The current service has been modified.<br />Save these changes before loading a new service?</p>
      <a onclick= "save_service('load');" href="#" class="ui-btn ui-corner-all ui-shadow ui-btn-inline" data-rel="back">Save</a>
      <a onclick="load_service(true);" class="ui-btn ui-corner-all ui-shadow ui-btn-inline" data-rel="back">Discard</a>
      <a href="#" class="ui-btn ui-corner-all ui-shadow ui-btn-inline" data-rel="back">Cancel</a>
    </div>
  </div>

  <!-- POPUP: Service item options -->
  <div data-role="popup" id="popup_service_item_options" data-position-to="origin">
    <div class="ui-content">
      <a onclick="edit_song();" id="btn_popup_edit_song" class="ui-btn ui-corner-all ui-shadow ui-btn-inline" data-rel="back">Edit</a>
      <a onclick="delete_item();" class="ui-btn ui-corner-all ui-shadow ui-btn-inline" data-rel="back">Remove</a>
      <a onclick="goto_item();" class="ui-btn ui-corner-all ui-shadow ui-btn-inline" data-rel="back">Display</a>
    </div>
  </div>

  <!-- POPUP: Save service as dialog -->
  <div data-role="popup" data-dismissible="false" data-overlay-theme="b" id="popup_save_service_as">
    <div data-role="header">
      <h1>Save service as...</h1>
    </div>
    <div role="main" class="ui-content">
      <p>Choose filename to save service as:</p>
      <div class="ui-field-contain">
        <label for="f_name" class="ui-hidden-accessible">Service file name:</label>
        <input id="f_name" name="f_name" type="text" value="" placeholder="service.json">
      </div>
      <a onclick="save_service_as($(this).parent().find('#f_name'));" href="#" class="ui-btn ui-corner-all ui-shadow ui-btn-inline" data-rel="back">Save</a>
      <a onclick="$(this).parent().find('#f_name').val('');" href="#" class="ui-btn ui-corner-all ui-shadow ui-btn-inline" data-rel="back">Cancel</a>
    </div>
  </div>

  <!-- POPUP: Load service dialog -->
  <div data-role="popup" data-dismissible="false" data-overlay-theme="b" id="popup_load_service">
    <div data-role="header">
      <h1>Load service</h1>
    </div>
    <div role="main" class="ui-content">
      <p>Choose service to load:</p>
      <fieldset id="load_files_radio" data-mini="true" data-role="controlgroup"></fieldset>
      <a onclick="load_service(false);" href="#" class="ui-btn ui-corner-all ui-shadow ui-btn-inline" data-rel="back">Load</a>
      <a onclick="" href="#" class="ui-btn ui-corner-all ui-shadow ui-btn-inline" data-rel="back">Cancel</a>
  </div>

  <!-- POPUP: Song item options -->
  <div data-role="popup" id="popup_song_item_options" data-position-to="origin">
    <div class="ui-content">
      <a onclick="edit_song();" class="ui-btn ui-corner-all ui-shadow ui-btn-inline" data-rel="back">Edit</a>
      <a onclick="add_song();" class="ui-btn ui-corner-all ui-shadow ui-btn-inline" data-rel="back">Add to Service</a>
    </div>
  </div>

  <!-- POPUP: Edit song dialog -->
  <div data-role="popup" data-dismissible="false" data-overlay-theme="b" id="popup_edit_song">
    <div data-role="header" id="edit_song_mode_header">
      <h1>Edit song</h1>
    </div>
    <div data-role="header" id="create_song_mode_header">
      <h1>Create song</h1>
    </div>
    <div role="main" class="ui-content">
      <div class="ui-grid-a">
        <div class="ui-block-a"> <!-- LEFT COLUMN -->
          <label for="e_title">Song name:</label>
          <input type="text" name="e_title" id="e_title" data-clear-btn="true">
          <label for="e_author">Author:</label>
          <input type="text" name="e_author" id="e_author" data-clear-btn="true">
          <label for="e_copyright">Copyright:</label>
          <input type="text" name="e_copyright" id="e_copyright" data-clear-btn="true">
          <div class="ui-grid-a">
            <div class="ui-block-a">
              <label for="e_book">Song book:</label>
              <input type="text" name="e_book" id="e_book" data-clear-btn="true">
            </div>
            <div class="ui-block-b">
              <label for="e_number">Song number:</label>
              <input type="text" name="e_number" id="e_number" data-clear-btn="true">
            </div>
          </div>
          <label for="e_order">Verse order:</label>
          <input type="text" name="e_order" id="e_order" data-clear-btn="true">
          <div class="ui-grid-a">
            <div class="ui-block-a">
              <label for="e_key">Key:</label>
              <select name="e_key" id="e_key">
                <option value="C">C</option>
                <option value="Db">Db</option>
                <option value="D">D</option>
                <option value="Eb">Eb</option>
                <option value="E">E</option>
                <option value="F">F</option>
                <option value="F#">F#</option>
                <option value="G">G</option>
                <option value="Ab">Ab</option>
                <option value="A">A</option>
                <option value="Bb">Bb</option>
                <option value="B">B</option>
              </select>
            </div>
            <div class="ui-block-b">
              <label for="e_transpose">Transpose by:</label>
              <input type="range" name="e_transpose" id="e_transpose" min="-11" max="11">
            </div>
          </div>
        </div>
        <div class="ui-block-b"> <!-- RIGHT COLUMN -->
          <label for="e_lyrics">Lyrics:</label>
          <textarea cols="40" rows="10" name="e_lyrics" id="e_lyrics" data-autogrow="false"></textarea>
        </div>
      </div>
      <div id="edit_song_popup_buttons">
        <a onclick="save_song();" href="#" class="ui-btn ui-corner-all ui-shadow ui-btn-inline">Save</a>
        <a onclick="reset_edit_song_form();" href="#" class="ui-btn ui-corner-all ui-shadow ui-btn-inline" data-rel="back">Cancel</a>
      </div>
    </div>
  </div>

  <!-- POPUP: Create song error -->
  <div data-role="popup" data-dismissible="false" data-overlay-theme="b" id="popup_error_edit_song">
    <p>Can't create song without title</p>
    <a onclick="" href="#" class="ui-btn ui-corner-all ui-shadow ui-btn-inline" data-rel="back">Cancel</a>
  </div>
</body>
</html>